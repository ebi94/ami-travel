{"ast":null,"code":"import _slicedToArray from \"/var/www/html/ami-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/var/www/html/ami-travel/src/context/AuthProvider.js\";\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport swal from 'sweetalert';\nexport const AuthContext = React.createContext();\nconst baseUrl = process.env.REACT_APP_BACKEND_API;\nconst fakeUserData = {\n  id: 1,\n  name: 'Jhon Doe',\n  avatar: 'http://s3.amazonaws.com/redqteam.com/isomorphic-reloaded-image/profilepic.png',\n  roles: ['USER', 'ADMIN']\n};\n\nconst AuthProvider = props => {\n  let history = useHistory();\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        loggedIn = _useState2[0],\n        setLoggedIn = _useState2[1];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        user = _useState4[0],\n        setUser = _useState4[1];\n\n  const signIn = params => {\n    console.log(params, 'sign in form Props');\n    setUser(fakeUserData);\n    setLoggedIn(true);\n    history.push(\"/\");\n  };\n\n  const signUp = params => {\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n    axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n    axios.defaults.headers.post['Access-Control-Allow-Headers'] = 'Origin, X-Requested-With, Content-Type, Accept';\n    axios.post(baseUrl + \"/travel\", {\n      travelName: params.namatravel,\n      phone: params.telp,\n      email: params.email,\n      password: params.password,\n      role: 0\n    }).then(response => {\n      const messages = response && response.data && response.data.messages;\n      swal(\"Terima Kasih\", messages, \"success\").then(() => {\n        history.go(0);\n      });\n      console.log('response', response);\n    }).catch(function (error) {\n      console.log('error', error);\n    }); // console.log(params, 'sign up form Props');\n  };\n\n  const logOut = () => {\n    setUser(null);\n    setLoggedIn(false);\n  };\n\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: {\n      loggedIn,\n      logOut,\n      signIn,\n      signUp,\n      user\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, props.children));\n};\n\nexport default AuthProvider;","map":{"version":3,"sources":["/var/www/html/ami-travel/src/context/AuthProvider.js"],"names":["React","useState","useHistory","axios","swal","AuthContext","createContext","baseUrl","process","env","REACT_APP_BACKEND_API","fakeUserData","id","name","avatar","roles","AuthProvider","props","history","loggedIn","setLoggedIn","user","setUser","signIn","params","console","log","push","signUp","defaults","headers","post","travelName","namatravel","phone","telp","email","password","role","then","response","messages","data","go","catch","error","logOut","children"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport swal from 'sweetalert';\n\nexport const AuthContext = React.createContext();\n\nconst baseUrl = process.env.REACT_APP_BACKEND_API;\n\nconst fakeUserData = {\n  id: 1,\n  name: 'Jhon Doe',\n  avatar:\n    'http://s3.amazonaws.com/redqteam.com/isomorphic-reloaded-image/profilepic.png',\n  roles: ['USER', 'ADMIN'],\n};\n\nconst AuthProvider = (props) => {\n  let history = useHistory();\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [user, setUser] = useState({});\n\n  const signIn = (params) => {\n    console.log(params, 'sign in form Props');\n    setUser(fakeUserData);\n    setLoggedIn(true);\n    history.push(`/`);\n  };\n\n  const signUp = (params) => {\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n    axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n    axios.defaults.headers.post['Access-Control-Allow-Headers'] = 'Origin, X-Requested-With, Content-Type, Accept';\n    axios.post(baseUrl + `/travel`, {\n      travelName: params.namatravel,\n      phone: params.telp,\n      email: params.email,\n      password: params.password,\n      role: 0\n    })\n    .then((response) => {\n      const messages = response && response.data && response.data.messages;\n      swal(\"Terima Kasih\", messages, \"success\").then(() => {\n        history.go(0);\n      });\n      console.log('response', response);\n    })\n    .catch(function (error) {\n      console.log('error', error);\n    });\n    // console.log(params, 'sign up form Props');\n  };\n\n  const logOut = () => {\n    setUser(null);\n    setLoggedIn(false);\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        loggedIn,\n        logOut,\n        signIn,\n        signUp,\n        user,\n      }}\n    >\n      <>{props.children}</>\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthProvider;\n"]},"metadata":{},"sourceType":"module"}