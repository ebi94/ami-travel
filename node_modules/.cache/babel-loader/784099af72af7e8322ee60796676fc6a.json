{"ast":null,"code":"import\"antd/es/input/style/css\";import _Input from\"antd/es/input\";import _objectSpread from\"/var/www/html/ami-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/var/www/html/ami-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import _ from'lodash';import{Marker}from'react-google-maps';import MapWrapper from'./MapWrapper';import makerImage from'./hotelMapMarker.png';const _require=require('react-google-maps/lib/components/places/SearchBox'),SearchBox=_require.SearchBox;const MapWithSearchBox=props=>{const _useState=useState([]),_useState2=_slicedToArray(_useState,2),dragNDropData=_useState2[0],setDragNDropData=_useState2[1];const updatevalue=props.updatevalue,name=props.name;const _useState3=useState({searchedLocation:''}),_useState4=_slicedToArray(_useState3,2),locationInput=_useState4[0],setLocationInput=_useState4[1];const _useState5=useState({center:{lat:40.7128,lng:-74.006},markers:[{position:{lat:40.7128,lng:-74.006}}],places:[]}),_useState6=_slicedToArray(_useState5,2),locationDetails=_useState6[0],setLocationDetails=_useState6[1];// const googleMapRef = useRef(null);\nconst SearchBoxRef=useRef(null);const onPlacesChanged=()=>{const places=SearchBoxRef.current.getPlaces();const bounds=new window.google.maps.LatLngBounds();places.forEach(place=>{if(place.geometry.viewport){bounds.union(place.geometry.viewport);}else{bounds.extend(place.geometry.location);}});const nextMarkers=places.map(place=>({position:place.geometry.location}));const nextCenter=_.get(nextMarkers,'0.position',locationDetails.center);setLocationDetails({places,center:nextCenter,markers:nextMarkers});setLocationInput({searchedLocation:places&&places[0]&&places[0].formatted_address});updatevalue(places);};const handleOnChange=event=>{event.stopPropagation();if(event.which==='13'){event.preventDefault();}setLocationInput({searchedLocation:event.target.value});};const handleOnPressEnter=event=>{event.stopPropagation();if(event.which==='13'){event.preventDefault();}setLocationInput({searchedLocation:event.target.value});};const onDragEndFunc=marker=>{let tempLocArray=[];var geocoder=new window.google.maps.Geocoder();const latlng={lat:Number(marker.latLng.lat().toFixed(4)),lng:Number(marker.latLng.lng().toFixed(4))};setLocationDetails(_objectSpread(_objectSpread({},locationDetails),{},{center:latlng}));geocoder.geocode({latLng:latlng},function(results,status){console.log(results,'results');if(results[0]&&results[0].formatted_address){setLocationInput({searchedLocation:results[0]&&results[0].formatted_address});const location={place_id:results[0].place_id,formatted_address:results[0].formatted_address,address_components:results[0].address_components,geometry:results[0].geometry};tempLocArray.push(location);}setDragNDropData(tempLocArray);});updatevalue(dragNDropData);};return/*#__PURE__*/React.createElement(MapWrapper,{containerElement:/*#__PURE__*/React.createElement(\"div\",{style:{height:'400px'}}),mapElement:/*#__PURE__*/React.createElement(\"div\",{style:{height:'100%'}}),defaultZoom:15,center:locationDetails.center},/*#__PURE__*/React.createElement(SearchBox,{ref:SearchBoxRef,controlPosition:window.google.maps.ControlPosition.TOP_LEFT,onPlacesChanged:onPlacesChanged},/*#__PURE__*/React.createElement(_Input,{type:\"text\",name:name,placeholder:\"Enter your hotel location\",style:{boxSizing:\"border-box\",border:\"1px solid transparent\",width:\"260px\",height:\"40px\",marginTop:\"10px\",padding:\"0 12px\",borderRadius:\"2px\",boxShadow:\"0 3px 6px rgba(0, 0, 0, 0.16)\",fontSize:\"15px\",outline:\"none\",textOverflow:\"ellipses\"},defaultValue:\"\",value:locationInput?locationInput.searchedLocation:'',onChange:handleOnChange,onPressEnter:handleOnPressEnter})),locationDetails.markers.map((marker,index)=>{return/*#__PURE__*/React.createElement(Marker,{icon:makerImage,key:index,position:marker.position,onDragEnd:marker=>onDragEndFunc(marker)});}));};export default MapWithSearchBox;","map":{"version":3,"sources":["/var/www/html/ami-travel/src/components/Map/MapSearchBox.js"],"names":["React","useState","useRef","_","Marker","MapWrapper","makerImage","require","SearchBox","MapWithSearchBox","props","dragNDropData","setDragNDropData","updatevalue","name","searchedLocation","locationInput","setLocationInput","center","lat","lng","markers","position","places","locationDetails","setLocationDetails","SearchBoxRef","onPlacesChanged","current","getPlaces","bounds","window","google","maps","LatLngBounds","forEach","place","geometry","viewport","union","extend","location","nextMarkers","map","nextCenter","get","formatted_address","handleOnChange","event","stopPropagation","which","preventDefault","target","value","handleOnPressEnter","onDragEndFunc","marker","tempLocArray","geocoder","Geocoder","latlng","Number","latLng","toFixed","geocode","results","status","console","log","place_id","address_components","push","height","ControlPosition","TOP_LEFT","boxSizing","border","width","marginTop","padding","borderRadius","boxShadow","fontSize","outline","textOverflow","index"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport _ from 'lodash';\nimport { Marker } from 'react-google-maps';\nimport MapWrapper from './MapWrapper';\nimport { Input } from 'antd';\nimport makerImage from './hotelMapMarker.png';\nconst {\n  SearchBox,\n} = require('react-google-maps/lib/components/places/SearchBox');\n\nconst MapWithSearchBox = (props) => {\n  const [dragNDropData, setDragNDropData] = useState([]);\n  const { updatevalue, name } = props;\n  const [locationInput, setLocationInput] = useState({ searchedLocation: '' });\n  const [locationDetails, setLocationDetails] = useState({\n    center: {\n      lat: 40.7128,\n      lng: -74.006,\n    },\n    markers: [\n      {\n        position: {\n          lat: 40.7128,\n          lng: -74.006,\n        },\n      },\n    ],\n    places: [],\n  });\n  // const googleMapRef = useRef(null);\n  const SearchBoxRef = useRef(null);\n  const onPlacesChanged = () => {\n    const places = SearchBoxRef.current.getPlaces();\n    const bounds = new window.google.maps.LatLngBounds();\n    places.forEach((place) => {\n      if (place.geometry.viewport) {\n        bounds.union(place.geometry.viewport);\n      } else {\n        bounds.extend(place.geometry.location);\n      }\n    });\n    const nextMarkers = places.map((place) => ({\n      position: place.geometry.location,\n    }));\n    const nextCenter = _.get(nextMarkers, '0.position', locationDetails.center);\n\n    setLocationDetails({\n      places,\n      center: nextCenter,\n      markers: nextMarkers,\n    });\n    setLocationInput({\n      searchedLocation: places && places[0] && places[0].formatted_address,\n    });\n    updatevalue(places);\n  };\n\n  const handleOnChange = (event) => {\n    event.stopPropagation();\n    if (event.which === '13') {\n      event.preventDefault();\n    }\n    setLocationInput({ searchedLocation: event.target.value });\n  };\n\n  const handleOnPressEnter = (event) => {\n    event.stopPropagation();\n    if (event.which === '13') {\n      event.preventDefault();\n    }\n    setLocationInput({ searchedLocation: event.target.value });\n  };\n\n  const onDragEndFunc = (marker) => {\n    let tempLocArray = [];\n    var geocoder = new window.google.maps.Geocoder();\n    const latlng = {\n      lat: Number(marker.latLng.lat().toFixed(4)),\n      lng: Number(marker.latLng.lng().toFixed(4)),\n    };\n\n    setLocationDetails({\n      ...locationDetails,\n      center: latlng,\n    });\n\n    geocoder.geocode({ latLng: latlng }, function (results, status) {\n      console.log(results, 'results');\n      if (results[0] && results[0].formatted_address) {\n        setLocationInput({\n          searchedLocation: results[0] && results[0].formatted_address,\n        });\n        const location = {\n          place_id: results[0].place_id,\n          formatted_address: results[0].formatted_address,\n          address_components: results[0].address_components,\n          geometry: results[0].geometry,\n        };\n        tempLocArray.push(location);\n      }\n      setDragNDropData(tempLocArray);\n    });\n    updatevalue(dragNDropData);\n  };\n\n  return (\n    <MapWrapper\n      containerElement={<div style={{ height: '400px' }} />}\n      mapElement={<div style={{ height: '100%' }} />}\n      defaultZoom={15}\n      center={locationDetails.center}\n    >\n      <SearchBox\n        ref={SearchBoxRef}\n        controlPosition={window.google.maps.ControlPosition.TOP_LEFT}\n        onPlacesChanged={onPlacesChanged}\n      >\n        <Input\n          type=\"text\"\n          name={name}\n          placeholder=\"Enter your hotel location\"\n          style={{\n            boxSizing: `border-box`,\n            border: `1px solid transparent`,\n            width: `260px`,\n            height: `40px`,\n            marginTop: `10px`,\n            padding: `0 12px`,\n            borderRadius: `2px`,\n            boxShadow: `0 3px 6px rgba(0, 0, 0, 0.16)`,\n            fontSize: `15px`,\n            outline: `none`,\n            textOverflow: `ellipses`,\n          }}\n          defaultValue=\"\"\n          value={locationInput ? locationInput.searchedLocation : ''}\n          onChange={handleOnChange}\n          onPressEnter={handleOnPressEnter}\n        />\n      </SearchBox>\n      {locationDetails.markers.map((marker, index) => {\n        return (\n          <Marker\n            icon={makerImage}\n            key={index}\n            position={marker.position}\n            onDragEnd={(marker) => onDragEndFunc(marker)}\n          />\n        );\n      })}\n    </MapWrapper>\n  );\n};\n\nexport default MapWithSearchBox;\n"]},"metadata":{},"sourceType":"module"}