{"ast":null,"code":"import _slicedToArray from\"/var/www/html/ami-travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import axios from'axios';import swal from'sweetalert';export const AuthContext=React.createContext();const baseUrl=process.env.REACT_APP_BACKEND_API;const fakeUserData={id:1,name:'Jhon Doe',avatar:'http://s3.amazonaws.com/redqteam.com/isomorphic-reloaded-image/profilepic.png',roles:['USER','ADMIN']};const AuthProvider=props=>{let history=useHistory();const _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];const _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];const signIn=params=>{console.log(params,'sign in form Props');setUser(fakeUserData);setLoggedIn(true);history.push(\"/\");};const signUp=params=>{axios.defaults.headers.post['Content-Type']='application/x-www-form-urlencoded; charset=UTF-8';axios.defaults.headers.post['Access-Control-Allow-Origin']='*';axios.defaults.headers.post['Access-Control-Allow-Headers']='Origin, X-Requested-With, Content-Type, Accept';axios.post(baseUrl+\"/travel\",{travelName:params.namatravel,phone:params.telp,email:params.email,password:params.password,role:0}).then(response=>{const messages=response&&response.data&&response.data.messages;swal(\"Terima Kasih\",messages,\"success\").then(()=>{history.go(0);});console.log('response',response);}).catch(function(error){console.log('error',error);});// console.log(params, 'sign up form Props');\n};const logOut=()=>{setUser(null);setLoggedIn(false);};return/*#__PURE__*/React.createElement(AuthContext.Provider,{value:{loggedIn,logOut,signIn,signUp,user}},/*#__PURE__*/React.createElement(React.Fragment,null,props.children));};export default AuthProvider;","map":{"version":3,"sources":["/var/www/html/ami-travel/src/context/AuthProvider.js"],"names":["React","useState","useHistory","axios","swal","AuthContext","createContext","baseUrl","process","env","REACT_APP_BACKEND_API","fakeUserData","id","name","avatar","roles","AuthProvider","props","history","loggedIn","setLoggedIn","user","setUser","signIn","params","console","log","push","signUp","defaults","headers","post","travelName","namatravel","phone","telp","email","password","role","then","response","messages","data","go","catch","error","logOut","children"],"mappings":"+IAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CAEA,MAAO,MAAMC,CAAAA,WAAW,CAAGL,KAAK,CAACM,aAAN,EAApB,CAEP,KAAMC,CAAAA,OAAO,CAAGC,OAAO,CAACC,GAAR,CAAYC,qBAA5B,CAEA,KAAMC,CAAAA,YAAY,CAAG,CACnBC,EAAE,CAAE,CADe,CAEnBC,IAAI,CAAE,UAFa,CAGnBC,MAAM,CACJ,+EAJiB,CAKnBC,KAAK,CAAE,CAAC,MAAD,CAAS,OAAT,CALY,CAArB,CAQA,KAAMC,CAAAA,YAAY,CAAIC,KAAD,EAAW,CAC9B,GAAIC,CAAAA,OAAO,CAAGhB,UAAU,EAAxB,CAD8B,gBAEED,QAAQ,CAAC,KAAD,CAFV,wCAEvBkB,QAFuB,eAEbC,WAFa,gCAGNnB,QAAQ,CAAC,EAAD,CAHF,yCAGvBoB,IAHuB,eAGjBC,OAHiB,eAK9B,KAAMC,CAAAA,MAAM,CAAIC,MAAD,EAAY,CACzBC,OAAO,CAACC,GAAR,CAAYF,MAAZ,CAAoB,oBAApB,EACAF,OAAO,CAACX,YAAD,CAAP,CACAS,WAAW,CAAC,IAAD,CAAX,CACAF,OAAO,CAACS,IAAR,MACD,CALD,CAOA,KAAMC,CAAAA,MAAM,CAAIJ,MAAD,EAAY,CACzBrB,KAAK,CAAC0B,QAAN,CAAeC,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,EAA8C,kDAA9C,CACA5B,KAAK,CAAC0B,QAAN,CAAeC,OAAf,CAAuBC,IAAvB,CAA4B,6BAA5B,EAA6D,GAA7D,CACA5B,KAAK,CAAC0B,QAAN,CAAeC,OAAf,CAAuBC,IAAvB,CAA4B,8BAA5B,EAA8D,gDAA9D,CACA5B,KAAK,CAAC4B,IAAN,CAAWxB,OAAO,UAAlB,CAAgC,CAC9ByB,UAAU,CAAER,MAAM,CAACS,UADW,CAE9BC,KAAK,CAAEV,MAAM,CAACW,IAFgB,CAG9BC,KAAK,CAAEZ,MAAM,CAACY,KAHgB,CAI9BC,QAAQ,CAAEb,MAAM,CAACa,QAJa,CAK9BC,IAAI,CAAE,CALwB,CAAhC,EAOCC,IAPD,CAOOC,QAAD,EAAc,CAClB,KAAMC,CAAAA,QAAQ,CAAGD,QAAQ,EAAIA,QAAQ,CAACE,IAArB,EAA6BF,QAAQ,CAACE,IAAT,CAAcD,QAA5D,CACArC,IAAI,CAAC,cAAD,CAAiBqC,QAAjB,CAA2B,SAA3B,CAAJ,CAA0CF,IAA1C,CAA+C,IAAM,CACnDrB,OAAO,CAACyB,EAAR,CAAW,CAAX,EACD,CAFD,EAGAlB,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBc,QAAxB,EACD,CAbD,EAcCI,KAdD,CAcO,SAAUC,KAAV,CAAiB,CACtBpB,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBmB,KAArB,EACD,CAhBD,EAiBA;AACD,CAtBD,CAwBA,KAAMC,CAAAA,MAAM,CAAG,IAAM,CACnBxB,OAAO,CAAC,IAAD,CAAP,CACAF,WAAW,CAAC,KAAD,CAAX,CACD,CAHD,CAKA,mBACE,oBAAC,WAAD,CAAa,QAAb,EACE,KAAK,CAAE,CACLD,QADK,CAEL2B,MAFK,CAGLvB,MAHK,CAILK,MAJK,CAKLP,IALK,CADT,eASE,wCAAGJ,KAAK,CAAC8B,QAAT,CATF,CADF,CAaD,CAtDD,CAwDA,cAAe/B,CAAAA,YAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport swal from 'sweetalert';\n\nexport const AuthContext = React.createContext();\n\nconst baseUrl = process.env.REACT_APP_BACKEND_API;\n\nconst fakeUserData = {\n  id: 1,\n  name: 'Jhon Doe',\n  avatar:\n    'http://s3.amazonaws.com/redqteam.com/isomorphic-reloaded-image/profilepic.png',\n  roles: ['USER', 'ADMIN'],\n};\n\nconst AuthProvider = (props) => {\n  let history = useHistory();\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [user, setUser] = useState({});\n\n  const signIn = (params) => {\n    console.log(params, 'sign in form Props');\n    setUser(fakeUserData);\n    setLoggedIn(true);\n    history.push(`/`);\n  };\n\n  const signUp = (params) => {\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n    axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n    axios.defaults.headers.post['Access-Control-Allow-Headers'] = 'Origin, X-Requested-With, Content-Type, Accept';\n    axios.post(baseUrl + `/travel`, {\n      travelName: params.namatravel,\n      phone: params.telp,\n      email: params.email,\n      password: params.password,\n      role: 0\n    })\n    .then((response) => {\n      const messages = response && response.data && response.data.messages;\n      swal(\"Terima Kasih\", messages, \"success\").then(() => {\n        history.go(0);\n      });\n      console.log('response', response);\n    })\n    .catch(function (error) {\n      console.log('error', error);\n    });\n    // console.log(params, 'sign up form Props');\n  };\n\n  const logOut = () => {\n    setUser(null);\n    setLoggedIn(false);\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        loggedIn,\n        logOut,\n        signIn,\n        signUp,\n        user,\n      }}\n    >\n      <>{props.children}</>\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthProvider;\n"]},"metadata":{},"sourceType":"module"}